{% load tailwind_tags %}
{% tailwind_css %}
{% load static %}

<!-- path: core/templates/partials/home_faq.html -->
<section class="mx-auto w-full max-w-7xl px-6 py-10">
  <h2 class="text-[40px] font-bold leading-tight text-[#322D29] mb-6">
    Foire aux questions
  </h2>

  <div class="flex flex-col" id="faq-accordion">
    <!-- Item 1 (ouvert par défaut) -->
    <div class="border-b border-[#cccccc]" data-accordion-item>
      <button type="button"
              class="w-full flex items-center justify-between py-4 px-2 text-left text-[18px] font-medium tracking-tight text-[#322D29] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-secondary"
              aria-expanded="true"
              aria-controls="faq-panel-1"
              data-accordion-trigger>
        <span>Quel est le prix d’un courtier immobilier&nbsp;?</span>
        <svg class="h-4 w-4 transition-transform duration-200 rotate-180" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-chevron>
          <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.127l3.71-3.896a.75.75 0 011.08 1.04l-4.24 4.46a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd"/>
        </svg>
      </button>
      <div id="faq-panel-1"
           class="px-2 pb-4 text-[14px] leading-[1.5em] text-[#9BA1A5]"
           role="region"
           data-accordion-panel>
        En général, les honoraires d’un courtier immobilier varient entre 4&nbsp;% et 5&nbsp;% du prix de vente de la propriété.
        Ce montant est souvent partagé entre le courtier du vendeur et celui de l’acheteur. Il est toutefois possible de négocier
        ces frais selon le type de mandat et les services offerts.
      </div>
    </div>

    <!-- Item 2 -->
    <div class="border-b border-[#cccccc]" data-accordion-item>
      <button type="button"
              class="w-full flex items-center justify-between py-4 px-2 text-left text-[18px] font-medium tracking-tight text-[#322D29] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-secondary"
              aria-expanded="false"
              aria-controls="faq-panel-2"
              data-accordion-trigger>
        <span>Comment choisir le bon courtier immobilier&nbsp;?</span>
        <svg class="h-4 w-4 transition-transform duration-200" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-chevron>
          <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.127l3.71-3.896a.75.75 0 011.08 1.04l-4.24 4.46a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd"/>
        </svg>
      </button>
      <div id="faq-panel-2"
           class="hidden px-2 pb-4 text-[14px] leading-[1.5em] text-[#9BA1A5]"
           role="region"
           data-accordion-panel>
        Pour choisir un courtier immobilier, privilégiez l’expérience, les recommandations, ainsi que sa connaissance du marché local.
        Assurez-vous qu’il soit à l’écoute de vos besoins et qu’il propose une stratégie adaptée pour vendre ou acheter rapidement,
        au meilleur prix.
      </div>
    </div>

    <!-- Item 3 -->
    <div class="border-b border-[#cccccc]" data-accordion-item>
      <button type="button"
              class="w-full flex items-center justify-between py-4 px-2 text-left text-[18px] font-medium tracking-tight text-[#322D29] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-secondary"
              aria-expanded="false"
              aria-controls="faq-panel-3"
              data-accordion-trigger>
        <span>Comment se préparer à l'achat d'une maison&nbsp;?</span>
        <svg class="h-4 w-4 transition-transform duration-200" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-chevron>
          <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.127l3.71-3.896a.75.75 0 011.08 1.04l-4.24 4.46a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd"/>
        </svg>
      </button>
      <div id="faq-panel-3"
           class="hidden px-2 pb-4 text-[14px] leading-[1.5em] text-[#9BA1A5]"
           role="region"
           data-accordion-panel>
        Avant d’acheter, établissez votre budget, obtenez une préautorisation hypothécaire et déterminez vos critères essentiels
        (emplacement, nombre de chambres, etc.). Cela vous permettra d’être prêt à faire une offre dès que vous trouverez la maison idéale.
      </div>
    </div>

    <!-- Item 4 -->
    <div class="border-b border-[#cccccc]" data-accordion-item>
      <button type="button"
              class="w-full flex items-center justify-between py-4 px-2 text-left text-[18px] font-medium tracking-tight text-[#322D29] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-secondary"
              aria-expanded="false"
              aria-controls="faq-panel-4"
              data-accordion-trigger>
        <span>Quels documents demander avant d'acheter une maison&nbsp;?</span>
        <svg class="h-4 w-4 transition-transform duration-200" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" data-chevron>
          <path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.127l3.71-3.896a.75.75 0 011.08 1.04l-4.24 4.46a.75.75 0 01-1.08 0L5.21 8.27a.75.75 0 01.02-1.06z" clip-rule="evenodd"/>
        </svg>
      </button>
      <div id="faq-panel-4"
           class="hidden px-2 pb-4 text-[14px] leading-[1.5em] text-[#9BA1A5]"
           role="region"
           data-accordion-panel>
        Il est important de demander la déclaration du vendeur, les rapports d’inspection, les factures d’entretien,
        ainsi que le certificat de localisation. Ces documents vous aideront à connaître l’état du bien et à éviter
        les mauvaises surprises.
      </div>
    </div>
  </div>

  <!-- JS inline : accordéon accessible (un seul ouvert) -->
  <script>
    (function () {
      const items = Array.from(document.querySelectorAll('[data-accordion-item]'));

      function setOpen(item, open) {
        const btn   = item.querySelector('[data-accordion-trigger]');
        const panel = item.querySelector('[data-accordion-panel]');
        const chev  = item.querySelector('[data-chevron]');
        btn.setAttribute('aria-expanded', String(open));
        panel.classList.toggle('hidden', !open);
        chev.classList.toggle('rotate-180', open);
        item.classList.toggle('is-open', open);
      }

      function toggleItem(target) {
        items.forEach((it) => setOpen(it, it === target ? !it.classList.contains('is-open') : false));
      }

      // Bind
      items.forEach((item, idx) => {
        const btn = item.querySelector('[data-accordion-trigger]');
        // ouvrir le 1er par défaut (déjà ouvert dans le markup)
        if (idx !== 0) setOpen(item, false);
        btn.addEventListener('click', () => toggleItem(item));
        btn.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleItem(item); }
        });
      });
    })();
  </script>
</section>
